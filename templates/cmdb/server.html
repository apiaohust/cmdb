<script src="/static/js/cmdb-ajax.js"></script>
<link rel="stylesheet" type="text/css" href="/static/jquery-easyui-1.3.5/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="/static/jquery-easyui-1.3.5/themes/icon.css">
<link rel="stylesheet" type="text/css" href="/static/jquery-easyui-1.3.5/demo.css">
<script type="text/javascript" src="/static/jquery-easyui-1.3.5/jquery.min.js"></script>
<script type="text/javascript" src="/static/jquery-easyui-1.3.5/jquery.easyui.min.js"></script>
<script>
    $(function(){
	$('#dg').datagrid({
        method:"get",
    //url:'/static/jquery-easyui-1.3.5/demo/datagrid/datagrid_data1.json',
    url:'/cmdb/get_json/',
    pageSize:10,
    pageList:[10,20,30,40,50],
    pageNumber:1,
    pagination:true,
    singleSelect:true,
    columns:[[
        {field:'hardware_num',title:'hardware_num',width:100},
        {field:'architecture',title:'architecture',width:100},
        {field:'version',title:'version',width:100,align:'right'}
      ]],
     toolbar: [{
		iconCls: 'icon-add',
        text:'add',
		handler: function(){
            window.location.href="/cmdb/add_server"

        }
	},'-',{
		iconCls: 'icon-edit',
        text:'edit',
		handler: function(){
            alert("22222");
            var row = $('#dg').datagrid('getSelected');
            alert("3333");
            alert(row.price);
        }
	},'-',{
		iconCls: 'icon-remove',
        text:'remove',
		handler: function(){
            alert("11");
            var row = $('#dg').datagrid('getSelected');
            var id = row.id;
            $.ajax( {
                type : "get",
                url : "/cmdb/server_remove/",
                data : {"id":id},
                timeout : 20000,
                cache : false,
                success : function(data) {

                    alert(data);
                    $('#dg').datagrid("reload")
                    }
            });

        }
	}

     ]


    });
})
</script>
{% extends 'cmdb/base.html' %}
{% load staticfiles %}
{% block titile  %} {% endblock %}
{% block body_block %}
{#    {% if serverlist %}#}
{#    <div class="container-fluid">#}
{#	<div class="row-fluid">#}
{#		<div class="span12">#}
{#			<table class="table table-bordered">#}
{#                {%  for s in serverlist %}#}
{#                    <tr >#}
{#                        <td>{{ s.hardware_num }}<td>#}
{#                        <td>{{ s.architecture }}<td>#}
{#                        <td>{{ s.version }}<td>#}
{#                        <td>{{ s.cpu_count }}<td>#}
{#                        <td>{{ s.memory }}<td>#}
{#                        <td>{{ s.detail }}<td>#}
{#                    </tr>#}
{#                {% endfor %}#}
{#            </table>#}
{#        {% else %}#}
{#                <strong>no server</strong>#}
{#        {% endif %}#}
{#		    </div>#}
{#	    </div>#}
{#    </div>#}
{#    <input type="button" value="add" id="server_add" onclick="window.open('{% url 'add_server' %}')"/>#}
{#    <input type="button" value="del" id="server_del" onclick="test()"/>#}
{#    <strong>{{ boldmessage }}</strong>#}
    {% csrf_token %}
  <table id="dg"></table>
{% endblock %}

